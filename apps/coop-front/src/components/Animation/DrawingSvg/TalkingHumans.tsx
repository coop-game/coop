/** @jsxImportSource @emotion/react */
import { transitionPageAnimationState } from "@common/recoil/recoil.atom";
import { css } from "@emotion/react";
import { motion } from "framer-motion";
import { useRecoilValue } from "recoil";

const temp = `M83.062,37.406l-5.181-12.396c-0.54-1.293-2.062-2.306-3.463-2.306H73.6h-2.263h-6.011l-6.027-2.772
	c-0.758-0.349-1.778-1.295-2.181-2.026l-2.724-4.933h5.314c1.224,4.237,5.13,7.347,9.755,7.347c5.603,0,10.16-4.557,10.16-10.159
	C79.622,4.558,75.064,0,69.462,0c-4.625,0-8.531,3.11-9.755,7.347H49.401c-0.558,0-1.007,0.167-1.334,0.497
	c-0.455,0.459-0.525,1.064-0.533,1.679l-11.898,4.736c-0.018-0.02-0.025-0.043-0.044-0.062c-0.357-0.361-0.861-0.544-1.496-0.544
	h-2.56c-0.127-0.065-0.255-0.13-0.395-0.176l-1.181-0.392c-0.3-0.099-0.618-0.149-0.945-0.149c-0.76,0-1.491,0.266-2.064,0.717
	H24.34c0.401-1.091,0.632-2.264,0.632-3.493C24.972,4.558,20.414,0,14.812,0C9.21,0,4.652,4.558,4.652,10.16
	c0,5.602,4.558,10.159,10.16,10.159c1.533,0,2.982-0.351,4.287-0.962c0.143,0.018,0.285,0.04,0.433,0.04h3.963l-0.957,1.733
	c-0.283,0.513-0.869,1.128-1.456,1.572H10.673c-1.551,0-2.813,1.262-2.813,2.813v28.246v0.471v29.223
	c0,2.585,1.864,4.688,4.154,4.688s4.154-2.103,4.154-4.688v-26.41h1.037v26.41c0,2.585,1.864,4.688,4.154,4.688
	s4.154-2.103,4.154-4.688V54.232v-0.471V36.045l0.255,0.026c0.145,0.015,0.297,0.022,0.456,0.022c0,0,0,0,0,0
	c1.206,0,2.68-0.419,3.585-1.02l8.448-5.599c0.638-0.423,1.053-1.062,1.168-1.798c0.116-0.737-0.083-1.472-0.56-2.07l-0.775-0.972
	c-0.59-0.74-1.542-1.182-2.545-1.182c-0.517,0-1.02,0.122-1.453,0.352l-5.578,2.965c0.079-0.141,0.15-0.28,0.209-0.417l3.005-6.955
	h2.367c0.635,0,1.139-0.183,1.496-0.544c0.573-0.578,0.564-1.374,0.558-2.077l-0.002-0.252l0.002-0.252
	c0.001-0.065-0.002-0.134-0.001-0.2l10.722-4.268c-0.252,0.648-0.246,1.358,0.039,2.018l4.02,9.304
	c0.492,1.138,1.74,2.474,2.842,3.042l4.988,2.573v25.019v0.471v29.223c0,2.585,1.863,4.688,4.154,4.688s4.154-2.103,4.154-4.688
	v-26.41h1.038v26.41c0,2.585,1.863,4.688,4.154,4.688s4.154-2.103,4.154-4.688V54.232v-0.471v-0.964l0.365,0.148
	c0.329,0.133,0.671,0.2,1.018,0.2c1.16,0,2.171-0.758,2.516-1.887l2.958-9.694C83.631,40.377,83.54,38.55,83.062,37.406z`;

const icon = {
  hidden: {
    pathLength: 0,
    fill: "rgba(255, 255, 255, 0)",
  },
  visible: {
    pathLength: 1.2,
    fill: "rgba(255, 255, 255, 1)",
  },
};

const radiowavesRight = `M 33.2500 51.0273 C 34.0938 51.6133 35.2656 51.3789 35.9219 50.4180 C 40.2344 44.2773 42.7187 36.3789 42.7187 28.0117 C 42.7187 19.6445 40.2109 11.7227 35.9219 5.5820 C 35.2656 4.6211 34.1172 4.3867 33.2500 4.9961 C 32.3360 5.6055 32.2187 6.7773 32.8984 7.7617 C 36.6484 13.3164 38.9922 20.4414 38.9922 28.0117 C 38.9922 35.5820 36.7422 42.8008 32.875 48.2617 C 32.1953 49.2227 32.3360 50.3945 33.2500 51.0273 Z M 23.7813 44.6289 C 24.6953 45.2383 25.8203 45.0039 26.4766 44.0664 C 29.5938 39.7539 31.3750 34.0117 31.3750 28.0117 C 31.3750 21.9883 29.6172 16.2461 26.4766 11.9336 C 25.7969 11.0195 24.6953 10.7851 23.7813 11.3945 C 22.8906 12.0039 22.7500 13.1524 23.4531 14.1602 C 26.0078 17.9102 27.6016 22.8320 27.6016 28.0117 C 27.6016 33.1914 26.0547 38.1602 23.4531 41.8633 C 22.7734 42.8711 22.8906 44.0195 23.7813 44.6289 Z M 14.4297 38.3008 C 15.2500 38.8633 16.375 38.6758 17.0547 37.7617 C 18.8828 35.3008 19.9844 31.6914 19.9844 28.0117 C 19.9844 24.3320 18.8594 20.7461 17.0547 18.2383 C 16.375 17.3242 15.2500 17.1367 14.4297 17.6992 C 13.4219 18.3789 13.2813 19.5742 14.0313 20.6055 C 15.3906 22.4336 16.2109 25.2227 16.2109 28.0117 C 16.2109 30.8008 15.3672 33.5898 14.0313 35.4414 C 13.3047 36.4492 13.4453 37.5976 14.4297 38.3008 Z`;
const radiowavesLeft = `M 22.7500 51.0273 C 23.6641 50.3945 23.8047 49.2227 23.1250 48.2617 C 19.2578 42.8008 17.0078 35.5820 17.0078 28.0117 C 17.0078 20.4414 19.3515 13.3164 23.1015 7.7617 C 23.7812 6.7773 23.6406 5.6055 22.7500 4.9961 C 21.8828 4.3867 20.7344 4.6211 20.0547 5.5820 C 15.7890 11.7227 13.2812 19.6445 13.2812 28.0117 C 13.2812 36.3789 15.7656 44.2773 20.0547 50.4180 C 20.7344 51.3789 21.8828 51.6133 22.7500 51.0273 Z M 32.2188 44.6289 C 33.0859 44.0195 33.2266 42.8711 32.5469 41.8633 C 29.9219 38.1602 28.3984 33.1914 28.3984 28.0117 C 28.3984 22.8320 29.9688 17.9102 32.5234 14.1602 C 33.2266 13.1524 33.0859 12.0039 32.2188 11.3945 C 31.3047 10.7851 30.2031 11.0195 29.5234 11.9336 C 26.3828 16.2461 24.6250 21.9883 24.6250 28.0117 C 24.6250 34.0117 26.4062 39.7539 29.5234 44.0664 C 30.1797 45.0039 31.3047 45.2383 32.2188 44.6289 Z M 41.5703 38.3008 C 42.5547 37.5976 42.6953 36.4492 41.9688 35.4414 C 40.6328 33.5898 39.7890 30.8008 39.7890 28.0117 C 39.7890 25.2227 40.6094 22.4336 41.9453 20.6055 C 42.7188 19.5742 42.5781 18.3789 41.5703 17.6992 C 40.7500 17.1367 39.6250 17.3242 38.9453 18.2383 C 37.1172 20.7461 36.0156 24.3320 36.0156 28.0117 C 36.0156 31.6914 37.0937 35.3008 38.9453 37.7617 C 39.6250 38.6758 40.7500 38.8633 41.5703 38.3008 Z`;

const TalkingHumans = () => {
  const isAnimationEnd = useRecoilValue(transitionPageAnimationState);

  return (
    <div
      css={css`
        display: flex;
        justify-content: center;
        width: 100%;
        height: 100%;
      `}
    >
      {isAnimationEnd && (
        <div
          css={css`
            position: relative;
            display: flex;
            justify-content: center;
          `}
        >
          <motion.svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 88.143 88.143"
            xmlSpace={"preserve"}
            css={css`
              height: 600px;
              width: 600px;
              overflow: visible;
              z-index: 5;
              width: 100%;
              height: 100%;
            `}
          >
            <motion.path
              d={temp}
              variants={icon}
              initial="hidden"
              animate="visible"
              stroke={"#FFF"}
              strokeWidth="1"
              strokeLinecap={"round"}
              strokeLinejoin={"round"}
              transition={{
                default: { duration: 2, ease: "linear" },
                fill: { delay: 2, duration: 1, ease: "linear" },
              }}
            />
          </motion.svg>
          <motion.svg
            fill="#4a895a"
            width="100%"
            height="80px"
            viewBox="0 0 56 56"
            xmlns="http://www.w3.org/2000/svg"
            css={css`
              position: absolute;
              top: 0;
              right: -25%;
              z-index: 2;
            `}
          >
            <motion.path
              d={radiowavesLeft}
              initial={{ opacity: 0 }}
              animate={{ x: "-700%", opacity: [0, 1, 1, 1] }}
              transition={{
                delay: 3,
                duration: 2,
                ease: "linear",
                repeat: Infinity,
                repeatDelay: 3,
              }}
            />
          </motion.svg>
          <motion.svg
            fill="#4a895a"
            width="100%"
            height="80px"
            viewBox="0 0 56 56"
            xmlns="http://www.w3.org/2000/svg"
            css={css`
              position: absolute;
              top: 0%;
              left: -25%;
              z-index: 2;
            `}
          >
            <motion.path
              d={radiowavesRight}
              initial={{ opacity: 0 }}
              animate={{ x: "700%", opacity: [0, 1, 1, 1] }}
              transition={{
                delay: 5,
                duration: 2,
                ease: "linear",
                repeat: Infinity,
                repeatDelay: 3,
              }}
            />
          </motion.svg>
        </div>
      )}
    </div>
  );
};

export default TalkingHumans;
