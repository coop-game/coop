2023-02-07

# 모노레포란?

## 폴리레포(polyrepo)

마이크로서비스 아키텍처가 대중화 됨에 따라 큰 레포를 작은 레포 여러개로 분할 하는 방향으로 나아갔다.

이것이 폴리레포라 부른다.

폴리레포는 소규모 팀에서 `마이크로 서비스를 빠르게 구현`하고 `독립적으로 배포`할 수 있어 좋다.

`한팀이 한 레포를 관리`한다는 `장점`도 있으나,

`단점`도 있다.

1. 패키지마다 `코드 중복`이 될 수도 있고,
2. 소통이 부족하면 `일관성이 없을 수도 있으며`,
3. 각 레포마다 `설정을 따로 해줘야 하는 불편함`도 있다.

## 모노레포(monorepo)

- 여러 프로젝트의 코드가 동일한 리포지토리에 저장되는 소프트웨어 개발 전략입니다 `(위키)`

말 그대로 한 레포 안에 여러 서브 프로젝가 있는 것이다.

폴리레포의 단점도 일부분 해결했다.

한 레포에서 관리하기에 코드중복도 없앨수 있고, 설정을 한곳에서 다 해줄 수 있어 편리하다.

배포도 편리하다.

다만 하나의 레포로 구성되었기에 관심 분리가 어렵고,

작은 수정이 레포 전체에 영향을 줄 수 도 있다는 단점이 있다.

# 모노레포를 왜 썼나요?

2021년 12월 프로젝트를 시작하며 draw 관련된 라이브러리를 찾아봤었다.

canvas로 직접 구현하는 것으로 기획하고 있었는데,

tldraw라는 라이브러리가 확장성이 좋아보였다.

github에서 코드를 까?보니 @tldraw/core 부분만 따로 만들고,

advanced용으로 수정을 할 수 있게 해두어 확장성에 이점이 있을것이라 생각하여 선택하였다.

그렇게 생겨난 coop-draw, coop-front 두 프로젝트 한 레포에서 관리해야 하는 입장이었다.

폴리레포롤 따로 관리 하기 보다는 두개 이므로 모노레포 방식이 적당하다고 생각했다.

# 모노레포중 터보레포를 쓴 이유는요?

사용하고자 고민했던 라이브러리는 3종류 였다.
lerna, nx ,turbo

비교글은 [모던 프론트엔드 프로젝트 구성 기법 - 모노레포 개념 편](https://d2.naver.com/helloworld/0923884)

네이버 테크 블로그에서 잘 정리되어 있었다.

다른것 보다 turbo를 vercel에서 인수한 것이 가장 컸다.

vercel을 통해서 프론트를 배포하려 했으니 turbo가 최적이라고 생각했다.

다음은 turborepo 사용편으로 돌아오겠습니다.

# reference

[모던 프론트엔드 프로젝트 구성 기법 - 모노레포 도구 편](https://d2.naver.com/helloworld/7553804)
[모던 프론트엔드 프로젝트 구성 기법 - 모노레포 개념 편](https://d2.naver.com/helloworld/0923884)
[Benefits and challenges of monorepo development practices](https://circleci.com/blog/monorepo-dev-practices/)
[Turborepo로 모노레포 개발 경험 향상하기](https://engineering.linecorp.com/ko/blog/monorepo-with-turborepo/)
